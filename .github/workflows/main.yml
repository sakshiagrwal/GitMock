# This is the configuration file for the Random Commit Generator workflow
name: Random Commit Generator

# The workflow is triggered in the following conditions:
# - On a schedule, specified using a cron expression, that runs every 24 hours at midnight.
# - When the workflow is manually dispatched.
# - On push events to any branch except the `main` branch.
on:
  schedule:
    # Run the workflow every 24 hours at midnight (0th minute of the 0th hour)
    - cron: "0 0 * * *"
  workflow_dispatch:
  push:
    branches:
      - main

jobs:
  generate-commits:
    # The job runs on an Ubuntu runner
    runs-on: ubuntu-latest

    # The job defines several environment variables that will be used to set the Git author and committer name and email when creating commits
    env:
      GIT_AUTHOR_NAME: sakshiagrwal
      GIT_AUTHOR_EMAIL: 81718060+sakshiagrwal@users.noreply.github.com
      GIT_COMMITTER_NAME: sakshiagrwal
      GIT_COMMITTER_EMAIL: 81718060+sakshiagrwal@users.noreply.github.com

    # The job defines a series of steps to execute
    steps:
      # Check out the repository
      - uses: actions/checkout@v3

      # Set up a Python environment
      - uses: actions/setup-python@v4
        with:
          python-version: 3.8

      # Install the gitpython and datetime libraries using pip, and then run the main script
      - run: |
          pip install gitpython datetime
          python main.py
